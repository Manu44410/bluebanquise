<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="prev" title="1. Introduction" href="introduction.html" />

    <meta name="generator" content="sphinx-5.1.1, furo 2022.06.21"/>
        <title>2. Vocabulary - BlueBanquise 2.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">BlueBanquise 2.0.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">BlueBanquise 2.0.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">2. Vocabulary</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="vocabulary">
<h1><span class="section-number">2. </span>Vocabulary<a class="headerlink" href="#vocabulary" title="Permalink to this heading">#</a></h1>
<p>Some words are important in <strong>BlueBanquise</strong>. Most of them are described here.</p>
<section id="ansible-vocabulary">
<h2><span class="section-number">2.1. </span>Ansible vocabulary<a class="headerlink" href="#ansible-vocabulary" title="Permalink to this heading">#</a></h2>
<section id="host">
<h3><span class="section-number">2.1.1. </span>Host<a class="headerlink" href="#host" title="Permalink to this heading">#</a></h3>
<p>An Ansible <strong>host</strong> (also often referred as a <strong>node</strong>) is a remote host managed
by Ansible. An <strong>host</strong> can be a physical server, but also a VM, a container or
something else.</p>
<img alt="_images/hosts_example.svg" class="align-center" src="_images/hosts_example.svg" /><p>Hosts are defined in <code class="docutils literal notranslate"><span class="pre">~/bluebanquise/inventory/cluster/</span></code> folder.</p>
<p>Please do a difference between an <strong>Ansible managed host</strong>, and a <strong>host</strong>.
All equipment that can have an ip address on the network are considered “host”,
but only those with an <strong>ssh</strong> + <strong>python</strong> capability and on which we will use Ansible
to deploy a configuration are considered “Ansible managed host”.
They are declared the same way in the stack inventory.</p>
</section>
<section id="group">
<h3><span class="section-number">2.1.2. </span>Group<a class="headerlink" href="#group" title="Permalink to this heading">#</a></h3>
<p>An Ansible <strong>group</strong> is a logical aggregation of hosts.
For example, system administrator can define a group “database_servers” that
would contain hosts “database1” and “database2”.</p>
<p><strong>Groups</strong> allow Ansible to provide dedicated <strong>variables</strong> to member hosts or
execute tasks on a set of hosts.</p>
<p>Note: a host can be part of multiple groups.</p>
</section>
<section id="variables">
<h3><span class="section-number">2.1.3. </span>Variables<a class="headerlink" href="#variables" title="Permalink to this heading">#</a></h3>
<p>Variables in Ansible follow the YAML structure.</p>
<p>A variable is like in any programming language: a variable name, and a data
related.</p>
<p>Multiple kind of variables exist in Ansible:</p>
<section id="simple">
<h4><span class="section-number">2.1.3.1. </span>Simple<a class="headerlink" href="#simple" title="Permalink to this heading">#</a></h4>
<p>A simple variable is defined this way:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">my_variable_1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello!</span><span class="w"></span>
<span class="nt">my_variable_2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7777</span><span class="w"></span>
</pre></div>
</div>
<p>In Jinja2, variables will be accessible directly this way:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{{ my_variable_1 }}
</pre></div>
</div>
<p>Output will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>hello!
</pre></div>
</div>
</section>
<section id="list">
<h4><span class="section-number">2.1.3.2. </span>List<a class="headerlink" href="#list" title="Permalink to this heading">#</a></h4>
<p>A list is like an array, and can be iterated over:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">my_names_list</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bob</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alice</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">henry</span><span class="w"></span>
</pre></div>
</div>
<p>In Jinja2, variables in a list can be iterated over, or a specific value of the
list can be used (like an array):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{% for i in my_names_list %}
{{ i }}
{% endfor %}
{{ my_names_list[0] }}
</pre></div>
</div>
<p>Note that index start at 0.</p>
<p>Output will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>bob
alice
henry
bob
</pre></div>
</div>
<p>Note also that to check if a list is empty,
it is possible to check the list itself:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{% if my_names_list %}
the list is not empty
{% else %}
the list is empty
{% endif %}
</pre></div>
</div>
</section>
<section id="dictionary">
<h4><span class="section-number">2.1.3.3. </span>Dictionary<a class="headerlink" href="#dictionary" title="Permalink to this heading">#</a></h4>
<p>A dictionary, is simply a pack of other variables, organized as a tree, and
defined under it (some kind of variables tree):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">my_dictionarry_1</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">my_variable_1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hello!</span><span class="w"></span>
<span class="w">  </span><span class="nt">my_variable_2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7777</span><span class="w"></span>
<span class="w">  </span><span class="nt">my_sub_part</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yellow</span><span class="w"></span>
<span class="w">    </span><span class="nt">font</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">verdana</span><span class="w"></span>
<span class="w">  </span><span class="nt">my_names_list</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bob</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alice</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">henry</span><span class="w"></span>
</pre></div>
</div>
<p>In Jinja2, dictionary can be access two ways:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>{% for i in my_dictionarry_1.my_names_list %}
{{ i }}
{% endfor %}
{% for i in my_dictionarry_1[&#39;my_names_list&#39;] %}
{{ i }}
{% endfor %}

{{ my_dictionarry_1.my_names_list[0] }}
{{ my_dictionarry_1[&#39;my_names_list&#39;][0] }}
</pre></div>
</div>
<p>Output will be:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>bob
alice
henry
bob
alice
henry

bob
bob
</pre></div>
</div>
<p>Jinja2 will be discussed later, do not worry about this point for now.</p>
</section>
<section id="j2-variables">
<h4><span class="section-number">2.1.3.4. </span>j2 Variables<a class="headerlink" href="#j2-variables" title="Permalink to this heading">#</a></h4>
<p>These are <strong>BlueBanquise</strong> specific variables.
All variables with name starting by <strong>j2_</strong> are j2 variables.</p>
<p>Most of these variables are used for the internal purpose of the stack.</p>
<p>These variables are here to simplify tasks and templates writing, and centralize
main logic of the stack.
To clarify your mind, you can consider that these variables contain Jinja2 code
as a string, that will be interpreted by Ansible during tasks/templates
execution.</p>
<p>Remember that in any case, if these variables are not providing the expected
value, you can use Ansible variables precedence mechanism to force your values.</p>
<p>Last point, for developers, these j2 variables should be considered as a way to
keep compatibility with roles, while upgrading the logic of the stack. Do not
hesitate to use them in roles, to ensure long term compatibility.</p>
</section>
</section>
<hr class="docutils" />
<section id="inventory-roles-and-playbooks">
<h3><span class="section-number">2.1.4. </span>Inventory, roles, and playbooks<a class="headerlink" href="#inventory-roles-and-playbooks" title="Permalink to this heading">#</a></h3>
<section id="inventory">
<h4><span class="section-number">2.1.4.1. </span>Inventory<a class="headerlink" href="#inventory" title="Permalink to this heading">#</a></h4>
<p>The Ansible inventory is the directory that contains Ansible variables and hosts
definitions.</p>
<p>Inventory is the <strong>DATA</strong>. In <strong>BlueBanquise</strong>, default path is <code class="docutils literal notranslate"><span class="pre">~/bluebanquise/inventory</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can have multiple inventories, and switch between them using <code class="docutils literal notranslate"><span class="pre">-i</span></code> parameter
when using Ansible commands.</p>
</div>
</section>
<section id="roles">
<h4><span class="section-number">2.1.4.2. </span>Roles<a class="headerlink" href="#roles" title="Permalink to this heading">#</a></h4>
<p>An Ansible role is a list of tasks to do to achieve a purpose.
For example, there will be a role called <code class="docutils literal notranslate"><span class="pre">dhcp_server</span></code>, that contains tasks to
install, configure and start the dhcp server.</p>
<p>In <strong>BlueBanquise</strong>, default path is <code class="docutils literal notranslate"><span class="pre">~/bluebanquise/roles</span></code>.</p>
<p>Note that roles folder is split in multiple directories, but
<code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code> file is configured to use roles in all of them.</p>
<p>Roles are the <strong>AUTOMATION LOGIC</strong>.</p>
</section>
<section id="playbooks">
<h4><span class="section-number">2.1.4.3. </span>Playbooks<a class="headerlink" href="#playbooks" title="Permalink to this heading">#</a></h4>
<p>An Ansible playbook is simply a list of roles to apply on a specific host or
group of hosts. It is a yaml file.</p>
<p>In <strong>BlueBanquise</strong>, default path is <code class="docutils literal notranslate"><span class="pre">~/bluebanquise/playbooks</span></code>.</p>
<p>Playbooks are your <strong>LIST OF ROLES TO APPLY on your hosts/targets</strong>.</p>
</section>
</section>
<hr class="docutils" />
<section id="variables-precedence">
<h3><span class="section-number">2.1.5. </span>Variables precedence<a class="headerlink" href="#variables-precedence" title="Permalink to this heading">#</a></h3>
<p>We are reaching the very important part of the stack.</p>
<p>Ansible has an internal mechanism called <strong>Variables precedence</strong>.
Simply put: you can define the same variables (same key name) multiple times, and
using this mechanism, some definitions will have priority above others,
depending of their position.</p>
<p>When a variable is defined in a yml file, the position of the file in the
Ansible inventory matters and is important.</p>
<p>For example, a variable defined in <code class="docutils literal notranslate"><span class="pre">~/bluebanquise/inventory/group_vars/all/</span></code>
will have the less precedence, and a variable defined in
<code class="docutils literal notranslate"><span class="pre">~/bluebanquise/inventory/cluster</span></code> will have a higher precedence, and so win if
variable is used.</p>
<p>The full list of available variables precedence is provided in Ansible
documentation:
<a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html#variable-precedence-where-should-i-put-a-variable">variable precedence list</a></p>
<p>This feature is key to the stack and key for system administrator to manipulate
the <strong>BlueBanquise</strong> stack the way he/she wants, and <em>force</em> automatic
values if desired.</p>
<p>For example, values can be set by default, and then redefined for some groups of
hosts without changing the default for all others.
Or it can be used to simply fix a dynamic j2 variable to the desired value in
hosts definitions if dynamic value is not the one expected (you can even
redefine the whole logic of the stack without editing the stack code). Etc.</p>
<p>Inventory can be seen as a giant pizza, in 3D then flatten.</p>
<ul class="simple">
<li><p><em>Paste</em> is the variable in <code class="docutils literal notranslate"><span class="pre">~/bluebanquise/inventory/group_vars/all</span></code></p></li>
<li><p>Then <em>large ingredients</em> comes from <code class="docutils literal notranslate"><span class="pre">~/bluebanquise/inventory/group_vars/equipment_myequipment</span></code></p></li>
<li><p>Then <em>small ingredients</em> above are the <code class="docutils literal notranslate"><span class="pre">~/bluebanquise/inventory/cluster/nodes/</span></code></p></li>
<li><p>And <em>pepper and tomatoes</em> (last layer) is the extra-vars at call.</p></li>
</ul>
<img alt="_images/pizza_example.svg" src="_images/pizza_example.svg" /><p>I like pizza…</p>
<p>Refer to the Ansible tutorial of this documentation if you do not know how to use Ansible,
to learn this mechanism by practice.</p>
</section>
<section id="replace">
<h3><span class="section-number">2.1.6. </span>Replace<a class="headerlink" href="#replace" title="Permalink to this heading">#</a></h3>
<p>Ansible and BlueBanquise default hash_behaviour is <em>replace</em> (which is Ansible’s default one).</p>
<p>If using <em>replace</em>, when a dictionary is impacted by the variable’s precedence
mechanism, Ansible overwrite the <strong>full dictionary</strong> if a variable has a higher
precedence somewhere.</p>
</section>
<section id="jinja2">
<h3><span class="section-number">2.1.7. </span>Jinja2<a class="headerlink" href="#jinja2" title="Permalink to this heading">#</a></h3>
<p>Jinja2 is the templating language used by Ansible to render templates in roles.
It is heavily used in the stack, and learning Jinja2 will often be needed to
create custom roles.
(But Jinja2 is simple if you are use to code or especially script with bash and python).</p>
<p>Full documentation is available in a “single page”:
<a class="reference external" href="https://jinja.palletsprojects.com/en/2.10.x/templates/">Jinja2 template designer</a></p>
</section>
</section>
<section id="stack-vocabulary">
<h2><span class="section-number">2.2. </span>Stack vocabulary<a class="headerlink" href="#stack-vocabulary" title="Permalink to this heading">#</a></h2>
<section id="icebergs">
<h3><span class="section-number">2.2.1. </span>Icebergs<a class="headerlink" href="#icebergs" title="Permalink to this heading">#</a></h3>
<p>Icebergs are logical (and often physical) isolation of ethernet management
networks. Most of the time, icebergs are used to:</p>
<ul class="simple">
<li><p>Spread load over multiple managements servers (for very large clusters). Icebergs are also often called “islands” in these cases.</p></li>
<li><p>Secure cluster by dividing specific usages, to prevent compromised system to access all the network.</p></li>
</ul>
<p>One Iceberg is composed of one or multiple managements servers, <strong>in charge of
the same pool of nodes</strong>.</p>
<p><strong>BlueBanquise</strong> support many kinds of configurations, but most common are:</p>
<section id="one-iceberg-configuration">
<h4><span class="section-number">2.2.1.1. </span>One iceberg configuration<a class="headerlink" href="#one-iceberg-configuration" title="Permalink to this heading">#</a></h4>
<div class="line-block">
<div class="line"><br /></div>
</div>
<img alt="_images/one_iceberg.svg" src="_images/one_iceberg.svg" /><div class="line-block">
<div class="line"><br /></div>
</div>
<p>For simple systems (small/medium HPC cluster, small enterprise network,
university IT practical session room, etc.), one iceberg scenario is the
standard. One or multiple management will reach the same ethernet administration
networks, and federate the same pool of nodes.</p>
<img alt="_images/single_iceberg_2_single_column.svg" class="align-center" src="_images/single_iceberg_2_single_column.svg" /><div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="multiple-icebergs-configuration">
<h4><span class="section-number">2.2.1.2. </span>Multiple icebergs configuration<a class="headerlink" href="#multiple-icebergs-configuration" title="Permalink to this heading">#</a></h4>
<div class="line-block">
<div class="line"><br /></div>
</div>
<img alt="_images/multiple_icebergs.svg" src="_images/multiple_icebergs.svg" /><div class="line-block">
<div class="line"><br /></div>
</div>
<p>For advanced systems, (large HPC clusters needing load spreading with unified
network, enterprise network, etc.), multiple icebergs scenario can be required.
<strong>BlueBanquise</strong> allows multiple levels of icebergs, for complex needs.</p>
<p>Manipulating order of network_interfaces defined for each host allows to create
a unified network so all nodes from all icebergs can communicate through this
network (most of the time an Interconnect network).</p>
<img alt="_images/multiple_icebergs.png" class="align-center" src="_images/multiple_icebergs.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="equipment-profiles">
<h3><span class="section-number">2.2.2. </span>Equipment profiles<a class="headerlink" href="#equipment-profiles" title="Permalink to this heading">#</a></h3>
<p>In <strong>BlueBanquise</strong>, nodes are often part of a group starting with
prefix <strong>equipment_</strong>. These groups are called <em>equipment profiles</em>.</p>
<p>They are used to provide to hosts of this group the <strong>equipment_profile</strong>
parameters (vender, server model, hardware embed, hosts operating system parameters, kernel parameters,
partitioning, etc.), and other variables if needed like dedicated
authentication parameters. These variables are prefixed with <strong>ep_</strong>.</p>
<img alt="_images/ep_hard.svg" class="align-center" src="_images/ep_hard.svg" /><p>These are key groups of the stack.</p>
<p><strong>It is important</strong> to note that equipment_profiles variables (<strong>ep_</strong>)
<strong>must not</strong> be used at an upper level than group_vars in variables precedence.
<strong>It can, but you must NOT</strong>, due to special usage of them.</p>
<p>For now, just keep in mind these variables exist. These will be discussed later.</p>
<hr class="docutils" />
<p>You can now follow the next part, depending of your needs:</p>
<ul class="simple">
<li><p>Proceed to quick start to deploy a very basic cluster.</p></li>
<li><p>Proceed with a standard full cluster deployment.</p></li>
</ul>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          <a class="prev-page" href="introduction.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">1. </span>Introduction</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Benoît Leveugle, Johnny Keats.
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">2. Vocabulary</a><ul>
<li><a class="reference internal" href="#ansible-vocabulary">2.1. Ansible vocabulary</a><ul>
<li><a class="reference internal" href="#host">2.1.1. Host</a></li>
<li><a class="reference internal" href="#group">2.1.2. Group</a></li>
<li><a class="reference internal" href="#variables">2.1.3. Variables</a><ul>
<li><a class="reference internal" href="#simple">2.1.3.1. Simple</a></li>
<li><a class="reference internal" href="#list">2.1.3.2. List</a></li>
<li><a class="reference internal" href="#dictionary">2.1.3.3. Dictionary</a></li>
<li><a class="reference internal" href="#j2-variables">2.1.3.4. j2 Variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inventory-roles-and-playbooks">2.1.4. Inventory, roles, and playbooks</a><ul>
<li><a class="reference internal" href="#inventory">2.1.4.1. Inventory</a></li>
<li><a class="reference internal" href="#roles">2.1.4.2. Roles</a></li>
<li><a class="reference internal" href="#playbooks">2.1.4.3. Playbooks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#variables-precedence">2.1.5. Variables precedence</a></li>
<li><a class="reference internal" href="#replace">2.1.6. Replace</a></li>
<li><a class="reference internal" href="#jinja2">2.1.7. Jinja2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stack-vocabulary">2.2. Stack vocabulary</a><ul>
<li><a class="reference internal" href="#icebergs">2.2.1. Icebergs</a><ul>
<li><a class="reference internal" href="#one-iceberg-configuration">2.2.1.1. One iceberg configuration</a></li>
<li><a class="reference internal" href="#multiple-icebergs-configuration">2.2.1.2. Multiple icebergs configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#equipment-profiles">2.2.2. Equipment profiles</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>